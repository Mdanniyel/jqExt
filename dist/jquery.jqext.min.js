/*
* jqExt - jQuery extensions and native javascript extensions
*
* Version: 0.0.1
* Build: 8
* Copyright 2011 Alex Tkachev
*
* Dual licensed under MIT or GPLv2 licenses
*   http://en.wikipedia.org/wiki/MIT_License
*   http://en.wikipedia.org/wiki/GNU_General_Public_License
*
* Date: 20 Mar 2012 19:13:19
*/

(function(a){a.ext={$break:{}},a.ext.mixins={},a.ext.Extender={addWrapedSetMethods:function(a,b){for(var c in a)b&&jQuery.fn[c]&&(jQuery.fn["jq_original_"+c]=jQuery.fn[c]),jQuery.fn[c]=a[c]},addUtilityMethods:function(a){for(var b in a)jQuery[b]=a[b]}}})(jQuery),function(a){var b={keys:function(){var a=[];for(var b in obj)obj.hasOwnProperty(b)&&a.push(b);return a}};Object.keys&&delete b.keys,a.extend(Object,b)}(jQuery),jQuery.ext.Extender.addUtilityMethods({isBoolean:function(a){return jQuery.type(a)==="boolean"},isNumber:function(a){return jQuery.type(a)==="number"},isDate:function(a){return jQuery.type(a)==="date"},isString:function(a){return jQuery.type(a)==="string"},isUndefined:function(a){return jQuery.type(a)==="undefined"}}),function(a){var b={each:function(b,c){var d=0;try{this._each(function(a){b.call(c,a,d++)})}catch(e){if(e!=a.ext.$break)throw e}return this},collect:function(a,b){var c=[];this.each(function(d,e){c.push(a.call(b,d,e))});return c},findIndex:function(b,c){var d=-1;this.each(function(e,f){if(b.call(c,e,f)){d=f;throw a.ext.$break}});return d},include:function(b){if(a.isFunction(this.indexOf))return this.indexOf(b)!=-1;var c=!1;this.each(function(d){if(d==b){c=!0;throw a.ext.$break}});return c},invoke:function(b){var c=a.makeArray(arguments).slice(1);return this.map(function(a){return a[b].apply(a,c)})},max:function(a,b){a=a||Function.identityFn;var c;this.each(function(d,e){d=a.call(b,d,e);if(c==null||d>=c)c=d});return c},min:function(a,b){a=a||Function.identityFn;var c;this.each(function(d,e){d=a.call(b,d,e);if(c==null||d<c)c=d});return c},property:function(a){var b=[];this.each(function(c){b.push(c[a])});return b},select:function(a,b){var c=[];this.each(function(d,e){a.call(b,d,e)&&c.push(d)});return c},sum:function(a,b){a=a||Function.identityFn;var c=0;this.each(function(d,e){d=a.call(b,d,e),c+=d});return c}};b.map=b.collect,a.ext.mixins.Enumerable=b}(jQuery),function(a){var b={clear:function(){this.length=0;return this},clone:function(){return Array.prototype.slice.call(this,0)},first:function(){return this[0]},last:function(){return this[this.length-1]},indexOf:function(a,b){b=b||0;var c=this.length;b<0&&(b=c+b);for(;b<c;b++)if(this[b]===a)return b;return-1},lastIndexOf:function(a,b){b=isNaN(b)?this.length:(b<0?this.length+b:b)+1;var c=this.slice(0,b).reverse().indexOf(a);return c<0?c:b-c-1},removeAt:function(a){if(a<0)throw"index cant be negative";var b=this.slice(a+1);this.length=a,this.push.apply(this,b);return this},remove:function(a){var b=this.indexOf(a);b>=0&&this.removeAt(b);return this},append:function(){for(var a=0;a<arguments.length;a++)this.push(arguments[a]);return this},prepend:function(){for(var a=arguments.length-1;a>=0;a--)this.unshift(arguments[a]);return this},_each:function(a,b){for(var c=0,d=this.length>>>0;c<d;c++)c in this&&a.call(b,this[c],c,this)}};Array.prototype.indexOf&&delete b.indexOf,Array.prototype.lastIndexOf&&delete b.lastIndexOf,Array.prototype.forEach&&(b._each=Array.prototype.forEach),a.extend(Array.prototype,b),a.extend(Array.prototype,a.ext.mixins.Enumerable)}(jQuery),jQuery.extend(Date.prototype,{getElapsed:function(a){return Math.abs((a||new Date).getTime()-this.getTime())}}),function(a){a.extend(Function,{emptyFn:function(){},identityFn:function(a){return a}}),a.extend(Function.prototype,{bind:function(b){if(arguments.length<2&&a.isUndefined(arguments[0]))return this;var c=this,d=null;arguments.length>1&&(d=Array.prototype.slice.call(arguments,1));return function(){var a=arguments;if(d){a=d;if(arguments.length>0){var e=a.length,f=arguments.length;while(f--)a[e+f]=arguments[f]}}return c.apply(b,a)}}})}(jQuery),jQuery.extend(RegExp,{escape:function(a){return a.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")}}),jQuery.extend(String.prototype,{capitalize:function(){return this.charAt(0).toUpperCase()+this.substring(1).toLowerCase()},camelize:function(a){if(this.length==0)return this;var b=this.split("_").collect(function(a){return a.capitalize()}).join("");a===!0&&(b=b.charAt(0).toLowerCase()+b.substring(1));return b},format:function(){var a=this;for(var b=0;b<arguments.length;b++){var c=new RegExp("\\{"+b+"\\}","gm");a=a.replace(c,arguments[b])}return a},startsWith:function(a){return this.lastIndexOf(a,0)===0},contains:function(a){return this.indexOf(a)!=-1},endsWith:function(a){var b=this.length-a.length;return b>=0&&this.indexOf(a,b)===b},trim:function(){return this.replace(/^\s*/,"").replace(/\s*$/,"")},underscore:function(){return this.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/-/g,"_").toLowerCase()}}),function(a){a.Event.Keys={BACKSPACE:8,TAB:9,RETURN:13,ENTER:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,HOME:36,END:35,PAGE_UP:33,PAGE_DOWN:34,INSERT:45},a.extend(a.Event.prototype,{stopEvent:function(){this.preventDefault(),this.stopPropagation()},isSpecialKey:function(){var b=this.which;return this.ctrlKey||this.isNavKeyPress()||b==a.Event.Keys.BACKSPACE||b>=16&&b<=20||b>=44&&b<=46},isNavKeyPress:function(){var b=this.which;return b>=33&&b<=40||b==a.Event.Keys.RETURN||b==a.Event.Keys.TAB||b==a.Event.Keys.ESC},isBackspaceKey:function(){return this.which==a.Event.Keys.BACKSPACE},isDeleteKey:function(){return this.which==a.Event.Keys.DELETE},isTabKey:function(){return this.which==a.Event.Keys.TAB},isEnterKey:function(){return this.which==a.Event.Keys.RETURN},isEscKey:function(){return this.which==a.Event.Keys.ESC},isUpKey:function(){return this.which==a.Event.Keys.UP},isDownKey:function(){return this.which==a.Event.Keys.DOWN}})}(jQuery),jQuery.ext.Extender.addUtilityMethods({systemInfo:function(){var a=navigator.userAgent.toLowerCase(),b=function(b){return b.test(a)},c={browser:{},os:{}};c.browser.isStrict=document.compatMode=="CSS1Compat",c.browser.isSecure=/^https/i.test(window.location.protocol),c.browser.isOpera=b(/opera/),c.browser.isChrome=b(/\bchrome\b/),c.browser.isWebKit=b(/webkit/),c.browser.isSafari=!c.browser.isChrome&&b(/safari/),c.browser.isSafari2=c.browser.isSafari&&b(/applewebkit\/4/),c.browser.isSafari3=c.browser.isSafari&&b(/version\/3/),c.browser.isSafari4=c.browser.isSafari&&b(/version\/4/),c.browser.isIE=!c.browser.isOpera&&b(/msie/),c.browser.isIE7=c.browser.isIE&&b(/msie 7/),c.browser.isIE8=c.browser.isIE&&b(/msie 8/),c.browser.isIE6=c.browser.isIE&&!c.browser.isIE7&&!c.browser.isIE8,c.browser.isGecko=!c.browser.isWebKit&&b(/gecko/),c.browser.isGecko2=c.browser.isGecko&&b(/rv:1\.8/),c.browser.isGecko3=c.browser.isGecko&&b(/rv:1\.9/),c.browser.isBorderBox=c.browser.isIE&&!c.browser.isStrict,c.os.isWindows=b(/windows|win32/),c.os.isMac=b(/macintosh|mac os x/),c.os.isAir=b(/adobeair/),c.os.isLinux=b(/linux/);return c}()},!0),function(a){var b={__initListeners:function(a){this.__listeners=this.__listeners||{},this.__listeners[a]=this.__listeners[a]||[]},addListener:function(b,c,d,e){if(a.type(b)==="string"&&b.length>0)if(b.indexOf(" ")==-1){c=c||null;var f={fn:c,scope:d||this,args:e||null};this.hasListener(b,f.fn,f.scope,f.args)||(this.__initListeners(b),this.__listeners[b].push(f))}else{var g=b.split(" ");for(var h=0;h<g.length;h++)this.addListener.call(this,g[h],c,d,e)}else{var i=b;for(var j in i)if(j!="scope"&&j!="args"){var k=i[j];this.addListener(j,k.fn||k,k.scope||i.scope,{args:k.args||i.args})}}return this},removeListener:function(b,c,d){if(a.type(b)==="string"&&b.length>0)if(b.indexOf(" ")==-1){this.__initListeners(b);if(arguments.length==1)this.__listeners[b].clear();else{d=d||{};var e=this.findListener(b,c,d.scope||this,d.args||null);e!==null&&this.__listeners[b].remove(e)}}else{var f=b.split(" ");for(var g=0;g<f.length;g++)this.removeListener.call(this,f[g],c,d)}else{var h=b;for(var i in h)if(i!="scope"&&i!="args"){var j=h[i];this.removeListener(i,j.fn||j,j.scope||h.scope,{args:j.args||h.args})}}return this},hasListener:function(a,b,c,d){return this.findListener(a,b,c,d)!==null},findListener:function(a,b,c,d){this.__initListeners(a);var e=this.__listeners[a];for(var f=0;f<e.length;f++){var g=e[f];if(g.fn==b&&g.scope==c&&g.args==d)return g}return null},fireListener:function(b){this.__initListeners(b);var c=[],d=a.makeArray(arguments).slice(1),e={eventName:b,source:this,bindArgs:null};d.unshift(e);for(var f=0;f<this.__listeners[b].length;++f){var g=this.__listeners[b][f];e.bindArgs=g.args;var h=g.fn.apply(g.scope,d)||null;if(h==a.ext.$break)return!1;c.push(h)}return c}};b.on=b.addListener,b.un=b.removeListener,b.fire=b.fireListener,a.ext.mixins.Observable=b}(jQuery),function(a){a.ext=a.ext||{},a.ext.Class=function(){var a={},b={getSuperClassMetaData:function(){return this.getClassMetaData().superClassMetaData},getClassMetaData:function(){return this.__clsMetaData},getClassConstructor:function(){return this.getClassMetaData().classConstructor},getClassName:function(a){var b=this.getClassMetaData();return a?b.fullClassName:b.className},getNamespace:function(){return this.getClassMetaData().namespace},instanceOf:function(a){return typeof a=="string"?this.__instanceOfByString(a):this.__instanceOfByClass(a)},__instanceOfByString:function(a){if(this.getClassName(!0)==a)return!0;var b=this.getSuperClassMetaData();while(b){if(b.fullClassName==a)return!0;b=b.superClassMetaData}return!1},__instanceOfByClass:function(a){if(this.getClassConstructor()==a)return!0;var b=this.getSuperClassMetaData();while(b){if(b.classConstructor==a)return!0;b=b.superClassMetaData}return!1}},c={create:function(d,e,f){arguments.length==1?(f=d,e=null,d="Object"):arguments.length==2&&(typeof d=="function"?(f=e,e=d,d="Object"):typeof d=="string"&&(f=e,e=null));var g=function(){arguments[0]!=a&&this.initialize.apply(this,arguments)};g.prototype.initialize=function(){},typeof e=="function"&&(g.prototype=new e(a),g.prototype.superClass=e.prototype),g.prototype.__clsMetaData={classConstructor:g,superClassMetaData:g.prototype.__clsMetaData||null,fullClassName:d,className:function(){var a=d.lastIndexOf(".");return a==-1?d:d.substring(a+1)}(),namespace:function(){var a=d.lastIndexOf(".");return a==-1?"":d.substring(0,a)}()};var h=[];g.prototype.getClassName||h.push(b),f&&f.include&&(f.include.reverse?h=h.concat(f.include.reverse()):h.push(f.include),delete f.include),f&&c.inherit(g.prototype,f);for(var i=0;mixin=h[i];i++)c.mixin(g.prototype,mixin);if(g.prototype.__clsMetaData.namespace.length>0){var j=c.namespace(g.prototype.__clsMetaData.namespace);j[g.prototype.__clsMetaData.className]=g}return g},mixin:function(a,b,c){c=c||!1;if(typeof b!="undefined"&&b!==null)for(var d in b)if(c||!a[d]&&typeof b[d]=="function")a[d]=b[d];return a},inherit:function(a,b,d){if(arguments.length==3){var e=a[d],f=b[d],g=f;f=function(){var a=this.superMethod;this.superMethod=e;var b=g.apply(this,arguments);a?this.superMethod=a:delete this.superMethod;return b},f.valueOf=function(){return g},f.toString=function(){return g+""},a[d]=f}else for(var h in b)a[h]&&typeof b[h]=="function"?c.inherit(a,b,h):a[h]=b[h];return a},singleton:function(){var b=arguments;if(b.length==2&&b[0].getInstance){var d=b[0].getInstance(a);d&&(b[0]=d)}return function(b){var d=!1,e=c.create.apply(b.callee,b);return{getInstance:function(){if(arguments[0]==a)return e;if(d)return d;return d=new e}}}(b)},namespace:function(a){a=a||"";var b=a.split("."),c=b[0],d=window[c]=window[c]||{},e=b.slice(1);for(var f=0;f<e.length;f++){var g=e[f];d=d[g]=d[g]||{}}return d}};return c}()}(jQuery),jQuery.ext.Extender.addWrapedSetMethods({bindLater:function(a,b,c,d){var e=200;arguments.length==4?e=Array.prototype.pop.call(arguments):arguments.length==3&&jQuery.isFunction(b)&&jQuery.isNumber(c)?e=Array.prototype.pop.call(arguments):arguments.length==2&&typeof a==="object"&&jQuery.isNumber(b)&&(e=Array.prototype.pop.call(arguments));var f=this,g=arguments;window.setTimeout(function(){f.bind.apply(f,g)},e);return this}},!0),jQuery.ext.Extender.addWrapedSetMethods({region:function(a){var b=jQuery(this),c=b.offset(),d=Math.ceil(c.top),e=Math.ceil(c.left),f,g;a===!1?(f=b.width(),g=b.height()):(f=b.outerWidth(),g=b.outerHeight());return{top:d,left:e,right:e+f,bottom:d+g}},outerHeight:function(a,b){if(!this[0])return null;if(jQuery.isNumber(a)){var c=this.jq_original_outerHeight(b)-this.height();return this.height(a-c)}return this.jq_original_outerHeight.apply(this,arguments)},outerWidth:function(a,b){if(!this[0])return null;if(jQuery.isNumber(a)){var c=this.jq_original_outerWidth(b)-this.width();return this.width(a-c)}return this.jq_original_outerWidth.apply(this,arguments)},containedIn:function(a){if(!this[0])return null;jQuery.isArray(a)||(a=[a]);var b=this[0];for(var c=0;c<a.length;c++){var d=a[c];d instanceof jQuery&&(d=a[c].get(0));if(jQuery.contains(d,b))return!0}return!1}},!0),jQuery.ext.Extender.addWrapedSetMethods({serializeObject:function(){var a,b;a=this.serializeArray(),b={},$.each(a,function(){var a,c;c=this.name.replace("[]",""),this.value!=null?a=this.value:a="",b[c]!=null?(b[c].push||(b[c]=[b[c]]),b[c].push(a)):b[c]=a});return b}},!0)
